---
import Text from '@/components/Text.astro'

interface Props {
  index: number
  title?: string
  body?: string
  expanded?: boolean
}

const { index, title, body, expanded = false } = Astro.props

const headingId = `accordion-collapse-heading-${index}`
const bodyId = `accordion-collapse-body-${index}`
---

<h3 id={headingId}>
  <button
    type='button'
    class='flex items-center justify-between w-full p-5 font-medium rtl:text-right border border-b-0 border-gray-200 rounded-t-xl focus:ring-4 focus:ring-gray-200 hover:bg-gray-100 gap-3'
    data-accordion-target={bodyId}
    aria-expanded={expanded}
    aria-controls={bodyId}>
    <Text
      tag={'span'}
      variant={'cardTitle'}
      ><slot name='title'><Fragment set:html={title} /></slot></Text
    >

    <svg
      data-accordion-icon
      class='w-3 h-3 rotate-180 shrink-0'
      aria-hidden='true'
      xmlns='http://www.w3.org/2000/svg'
      fill='none'
      viewBox='0 0 10 6'>
      <path
        stroke='currentColor'
        stroke-linecap='round'
        stroke-linejoin='round'
        stroke-width='2'
        d='M9 5 5 1 1 5'
      ></path>
    </svg>
  </button>
</h3>
<div
  id={bodyId}
  class='hidden'
  aria-labelledby={headingId}>
  <div class='p-5 border border-b-0 border-gray-200'>
    <Text
      tag={'span'}
      variant={'cardBody'}
      ><slot name='body'><Fragment set:html={body} /></slot></Text
    >
  </div>
</div>
